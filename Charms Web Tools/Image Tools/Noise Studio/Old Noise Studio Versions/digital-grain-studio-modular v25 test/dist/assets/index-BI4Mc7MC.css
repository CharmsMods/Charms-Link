:root{--bg: #000;--fg: #fff;--panel-max: 460px;--muted: #8c8c8c;--accent: #2a9df4;--border: rgba(255, 255, 255, .08);--layer-h: 40px;--tab-bg: #1a1a1a;--tab-active: #2a9df4}*{box-sizing:border-box}html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:Courier New,monospace}body{padding:16px;display:flex;gap:16px;align-items:flex-start;min-height:100vh}.container{display:flex;gap:16px;width:100%;height:100%}.controls-panel{flex:0 0 var(--panel-max);max-width:var(--panel-max);min-width:320px;padding-right:10px;overflow-y:auto;height:100%;scrollbar-width:thin;scrollbar-color:var(--muted) var(--bg);display:flex;flex-direction:column}.controls-panel h1{font-size:18px;margin:0 0 4px;text-align:center;letter-spacing:-.5px}.muted{color:var(--muted);font-size:12px;margin-bottom:12px;display:block;text-align:center}.tab-toggle-container{display:flex;gap:4px;margin:10px 0;background:#111;padding:4px;border:1px solid var(--border);border-radius:4px}.tab-btn{flex:1;padding:8px;font-size:11px;background:#1a1a1a;color:var(--muted);border:none;cursor:pointer;transition:all .2s}.tab-btn.active{background:var(--accent);color:#000}.tab-content{display:none;flex-direction:column;gap:10px}.tab-content.active{display:flex}.drag-layer{background:#111;border:1px solid var(--border);padding:8px 12px;margin-bottom:6px;cursor:grab;display:flex;justify-content:space-between;align-items:center;-webkit-user-select:none;user-select:none;font-size:13px;border-radius:4px}.drag-layer:active{cursor:grabbing;background:#222;border-color:var(--accent)}.drag-layer.dragging{opacity:.5}.drag-handle{color:var(--muted);margin-right:10px}.drag-controls{display:flex;align-items:center;gap:10px}.drag-toggle{cursor:pointer;accent-color:var(--accent)}details{border:1px solid var(--border);margin-bottom:8px;padding:6px;border-radius:4px;background:#0a0a0a}summary{cursor:pointer;font-weight:700;margin:0 0 6px;outline:none;-webkit-user-select:none;user-select:none;font-size:13px}summary:hover{color:var(--accent)}.control-row{display:flex;gap:8px;align-items:center;margin-bottom:6px;min-height:28px}.control-row label{flex:0 0 120px;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:12px}input[type=range]{flex:1;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;cursor:pointer;height:14px}input[type=range]::-webkit-slider-runnable-track{width:100%;height:2px;background:#ffffff26;border-radius:2px;border:none}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;height:8px;width:8px;border-radius:50%;background:#fff;margin-top:-3px;border:none;box-shadow:0 1px 3px #00000080;transition:transform .1s}input[type=range]:active::-webkit-slider-thumb{transform:scale(1.2)}input[type=range]::-moz-range-track{width:100%;height:2px;background:#ffffff26;border-radius:2px;border:none}input[type=range]::-moz-range-thumb{height:8px;width:8px;border-radius:50%;background:#fff;border:none;box-shadow:0 1px 3px #00000080;transition:transform .1s}input[type=range]:active::-moz-range-thumb{transform:scale(1.2)}.control-value{width:60px;padding:2px 4px;text-align:right;background:#000;color:var(--fg);border:1px solid var(--border);font-family:monospace;font-size:11px}select.control-value{flex:1;min-width:120px;padding:4px}.row-buttons{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}.palette-list{display:flex;flex-wrap:wrap;gap:4px;margin-top:8px;padding:4px;border:1px solid var(--border);min-height:32px;background:#050505}.palette-color-item{display:flex;align-items:center;background:#1a1a1a;border:1px solid var(--border);padding:2px;gap:4px}.palette-color-item input[type=color]{width:24px;height:24px;padding:0;border:none;background:none;cursor:pointer}.remove-color-btn{background:none;border:none;color:#f55;cursor:pointer;font-size:14px;padding:0 4px;line-height:1}.remove-color-btn:hover{color:red;background:#ff00001a}button{background:#111;color:var(--fg);border:1px solid var(--border);padding:8px 12px;cursor:pointer;font-family:monospace;font-size:12px;transition:all .2s}button:hover:not(:disabled){background:var(--accent);color:#000;border-color:var(--accent)}button:disabled{opacity:.5;cursor:not-allowed}button.small-btn{padding:4px 8px;font-size:10px}.preview-column{flex:1 1 auto;min-width:320px;display:flex;flex-direction:column;gap:12px;height:100%;overflow:hidden}.preview-top{display:flex;align-items:center;justify-content:space-between;gap:12px}.preview-container{position:relative;border:1px solid var(--border);background:repeating-linear-gradient(45deg,#111,#111 10px,#0e0e0e 10px,#0e0e0e 20px);overflow:hidden;flex:1;display:flex;align-items:center;justify-content:center;min-height:300px}canvas{display:block;width:100%;height:100%;object-fit:contain;box-shadow:0 0 20px #00000080}.overlay-original{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;pointer-events:none;z-index:10;transition:opacity .5s ease}.overlay-original canvas{width:100%;height:100%;object-fit:contain;opacity:0;transition:opacity .5s ease}.overlay-original.show canvas{opacity:1}#caPin{width:12px;height:12px;background:var(--accent);border:2px solid #fff;border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);cursor:crosshair;z-index:20;box-shadow:0 0 5px #000;display:none}#caPin.active{display:block}#caPin:after{content:"";position:absolute;top:50%;left:50%;width:40px;height:40px;border:1px dashed rgba(255,255,255,.3);transform:translate(-50%,-50%);border-radius:50%;pointer-events:none}.layer-preview-window{border:1px solid var(--border);background:#050505;padding:8px;height:160px;flex:0 0 160px;overflow:hidden}.layer-grid{display:flex;gap:4px;height:100%}.layer-item{border:1px solid var(--border);flex:1;display:flex;flex-direction:column;background:#000;cursor:pointer;transition:border-color .2s;position:relative;min-width:60px}.layer-item:hover{border-color:var(--muted)}.layer-item.active{border-color:var(--accent)}.layer-title{color:var(--muted);font-size:9px;text-transform:uppercase;text-align:center;height:24px;line-height:1.2;word-wrap:break-word;padding:2px}.layer-canvas{width:100%;flex:1;background:#111;border-top:1px solid #222}.modal-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background:#000000e6;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .2s;z-index:3000}.modal-overlay.show{opacity:1;pointer-events:auto}.modal{background:#111;border:1px solid var(--border);padding:20px;max-width:90vw;max-height:90vh;overflow:auto;box-shadow:0 0 50px #000c}#loading{position:fixed;top:10px;right:10px;background:var(--accent);color:#000;padding:4px 8px;font-size:11px;font-weight:700;display:none;z-index:4000}.upscale-control{display:flex;align-items:center;gap:8px;font-size:11px;border:1px solid var(--border);padding:4px 8px;background:#0a0a0a;border-radius:4px}.upscale-input{width:40px;background:#000;border:1px solid var(--border);color:var(--fg);padding:2px;text-align:center;font-family:monospace}.lock-switch{display:flex;align-items:center;gap:6px;font-size:11px;cursor:pointer;-webkit-user-select:none;user-select:none;margin-right:12px;border-right:1px solid var(--border);padding-right:12px}.lock-checkbox{accent-color:var(--accent);cursor:pointer}.json-btn{background:#222;border:1px solid var(--border);color:var(--accent);font-size:10px;padding:4px 8px;cursor:pointer;margin-top:4px;width:100%;text-align:center}.json-btn:hover{background:var(--accent);color:#000}.info-section{background:#111;border:1px solid var(--border);padding:10px;border-radius:4px}.info-section h3{font-size:11px;color:var(--muted);margin:0 0 10px;text-transform:uppercase;letter-spacing:1px}.histogram-container{background:#000;border:1px solid #222;height:100px;margin-bottom:8px;position:relative}#histogramCanvas{width:100%;height:100%;display:block}.info-row{display:flex;justify-content:space-between;font-size:11px;color:var(--muted);margin-bottom:4px}.info-row span:last-child{color:var(--accent);font-family:monospace}.vectorscope-container{background:#000;border:1px solid #222;display:flex;justify-content:center;padding:8px;margin-bottom:8px}#vectorscopeCanvas{border-radius:50%;background:radial-gradient(circle,#111,#000)}@media (max-width:900px){body{padding:10px;flex-direction:column}.container{flex-direction:column}.controls-panel{width:100%;max-width:none;flex:none;height:auto;max-height:40vh}.preview-column{width:100%;height:50vh}}
